---
layout: post
title: "cvs使用记录"
category: 个人笔记
tags: [版本控制,cvs]
subtitle:
author: "fishcried"
header-img: "img/bg/home-bg.jpg"
---

#  cvs 环境设置

	export CVSROOT=:pserver:user@server#port:/path/to/cvsroot
	# add this line to .bashrc
	# example:
	# exprot CVSROOT=:pserver:wtq@192.168.42.221#2401:/home/TDS7030_x86

* pserver 访问方式，口令认证的意思。其他gserver,kserver,ext
* user  username
* server ip or hostname
* /path/to/cvsroot CVSROOT目录

#  登录cvs服务器 

	cvs login
	# a file ~/.cvspass will be created which saves your password when you login successfully.

#  cvs的日常使用 

cvs使用流程
- checkout 
- status
- update
- modify the files 
- update
- check conflicts and resolve
- commit
 
#  常用命令 

	# 迁出
	cvs checkout module_name
	第一次checkout后，就不能通过cvs checkout 来同步文件了，而是要进入目录下进行具体的文件版本同步操作。
	
	# 更新
	cvs update filename
	cvs -n up 显示冲突文件，但是不会对本地代码有任何修改
	
	不指定文件名，cvs将同步所有子目录下的文件。
	要样陈先同步，后修改的习惯。每天工作之前最好进行update
	
	# 提交
	cvs commit -m "write some comments here" file_name
	最好一次只提交一个文件，并且写好注释。
	
	# 修改注释
	cvs admin -m 1.3:"write some comments here" file_name
	这个命令可以修改某个文件的某个版本的注释。
	
	# 查看文件状态 
	cvs status filename
	
	最重要的是status信息，主要有四种状态：
	1 Up-to-date: 表明你要的文件是最新的
	2 Locally Modified: 表明你曾经修改过该文件，但是还没有提交，你的版本比仓库里的新。
	3 Needing Patch: 表明别人已经修改过该文件并且已经提交了！你的版本比仓库的旧。
	4 Needs Merge: 表明你曾经修改过该文件，但是别人也修改了，且已经提交。
	
	# 查看日志
	cvs log file_name 

#  其他常用命令 
 
##  添加文件或者目录 

	cvs add newfile
	cvs -kb newfile
	cvs add dir

对于非纯文本的项目，需要使用 -kb选项， 否则有可能出现被破坏的情怀。
然后确认修改并注释

	cvs ci -m "write some comments here" newfile

##  删除文件 

	cvs remove file_name
	cvs ci -m "write some comments here" file_name
 
##   修改文件名 

	cvs remove old_file_name
	cvs add new_file_name

cvs里面没有cvs rename 或者 cvs move.
    
##  目录同步 

	cvs update -d
  
##  放弃本地修改 

	cvs update -C filename

如果修改了本地文件，不想提交，想重新取新文件。
    
*建议把checkout的文件缺省设置成readonly,把"cvs -r"添加到~/.cvsrc中。如果想放弃本地个修改`cvs unedit filename`, 他会undo,而且把文件又变成readonly.*
    
##  恢复到旧版本 

	cvs update -j 1.20 -j 1.15 filenames

	cvs update -r 1.15 file.name

-r 会给文件打上一个叫1.15的sticky tag.
    
##  文件比较 

	cvs diff -c filename

	cvs diff -c -r 1.8 -r 1.5  filename
  
##  Sticky tag 

	cvs tag release_name module_name

	cvs chechout -r release_name module_name

# 变更记录

|Why | Who | When |
|----|-----|------|
|旧文档整理|fishcired|2014-07-13 |
